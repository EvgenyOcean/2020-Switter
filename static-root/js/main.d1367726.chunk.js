(this.webpackJsonpr_tweeter=this.webpackJsonpr_tweeter||[]).push([[0],{30:function(e,t,n){e.exports=n(42)},36:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),o=n.n(i),c=(n(35),n(36),n(21)),l=n(16),s=n(5),u=n(29),d=n(9),m=n(11),w=n(22),f=n(7);var h=function(e){var t=e.value,n=e.dispatch;return r.a.createElement(w.a,null,r.a.createElement(f.a,{xs:10,lg:8,className:"mx-auto mb-5 px-0"},r.a.createElement(d.a,{onSubmit:e.handleTweetAdd},r.a.createElement(d.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(d.a.Label,null,"Create New Tweet:"),r.a.createElement(d.a.Control,{as:"textarea",rows:"3",value:t,onChange:function(e){var t=e.target.value;n({action:"changing textarea",value:t})}})),r.a.createElement(m.a,{variant:"primary",type:"submit"},"Submit"))))},g=n(23),v=n(24),k=n(14);function E(){var e=Object(g.a)(["\n  // background-color: red; \n"]);return E=function(){return e},e}var p=Object(v.a)(m.a)(E()),b=function(e){var t=e.tweet,n=e.tweet.original;return r.a.createElement(f.a,{xs:10,lg:8,className:"mx-auto border border-success py-3 mb-3"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-body"},r.a.createElement("h5",{className:"mt-0"},"Media heading"),t.id," == ",t.content,n&&r.a.createElement("div",{className:"media mt-3 ml-5 border border-primary p-3 mb-3"},r.a.createElement("div",{className:"media-body"},r.a.createElement("h5",{className:"mt-0"},"Parent Heading"),n.content),r.a.createElement(k.a,{"aria-label":"Basic example"},r.a.createElement(p,{variant:n.likes.user_liked?"info":"primary",onClick:function(){e.handleLikeClick(n.id)}},"Like ",n.likes.likes),r.a.createElement(p,{variant:"success",onClick:e.handleRetweet.bind(null,n.id)},"Retweet")))),r.a.createElement(k.a,{"aria-label":"Basic example"},r.a.createElement(p,{variant:t.likes.user_liked?"info":"primary",onClick:function(){e.handleLikeClick(t.id)}},"Like ",t.likes.likes),r.a.createElement(p,{variant:"success",onClick:e.handleRetweet.bind(null,t.id)},"Retweet"))))},T=n(28);var y=function(e){var t=Object(a.useReducer)((function(e,t){var n;switch(t.action){case"fetching tweets":return Object(s.a)(Object(s.a)({},e),{},{tweets:t.tweets});case"changing textarea":return Object(s.a)(Object(s.a)({},e),{},{value:t.value});case"adding new tweet":return{value:"",tweets:n=[t.newTweet].concat(Object(l.a)(e.tweets))};case"retweeting":return n=[t.newTweet].concat(Object(l.a)(e.tweets)),Object(s.a)(Object(s.a)({},e),{},{tweets:n});default:throw new Error("What are you doing?")}}),{value:"",tweets:[]}),n=Object(u.a)(t,2),i=n[0],o=n[1];Object(a.useEffect)((function(){fetch("/api/tweets").then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong!")})).then((function(e){o({action:"fetching tweets",tweets:e})})).catch((function(e){console.log(e.message)}))}),[]);var d=function(e){fetch("/api/tweets/tweet-action/".concat(e),{method:"POST",headers:{HTTP_X_REQUESTED_WITH:"XMLHttpRequest","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify({action:"retweet"})}).then((function(e){if(e.ok)return e.json();throw new Error("something went wrong!")})).then((function(e){o({action:"retweeting",newTweet:e})})).catch((function(e){console.log(e)}))},m=function(e){var t=i.tweets.find((function(t){return t.id===e})).likes.user_liked?"dislike":"like";fetch("/api/tweets/tweet-action/".concat(e),{method:"POST",headers:{HTTP_X_REQUESTED_WITH:"XMLHttpRequest","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify({action:t})}).then((function(e){if(e.ok)return e.json();throw new Error("something went wrong!")})).then((function(t){var n=t.likes,a=JSON.stringify(i.tweets),r=(a=JSON.parse(a)).find((function(t){return t.id===e}));r.likes.likes=n,r.likes.user_liked=!r.likes.user_liked;var l=a.filter((function(t){if(t.original)return t.original.id===e}));if(l){var s,u=Object(c.a)(l);try{for(u.s();!(s=u.n()).done;){var d=s.value;d.original.likes.likes=n,d.original.likes.user_liked=!d.original.likes.user_liked}}catch(m){u.e(m)}finally{u.f()}}o({action:"fetching tweets",tweets:a})})).catch((function(e){console.log(e)}))};return r.a.createElement(T.a,null,r.a.createElement(h,{dispatch:o,value:i.value,handleTweetAdd:function(e){var t={content:i.value};e.preventDefault(),fetch("/api/tweets/add-tweet",{method:"POST",headers:{HTTP_X_REQUESTED_WITH:"XMLHttpRequest","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong!")})).then((function(e){o({action:"adding new tweet",newTweet:e})})).catch((function(e){console.log(e)}))}}),i.tweets.map((function(e){return r.a.createElement(b,{key:e.id,tweet:e,handleRetweet:d,handleLikeClick:m})})))};var O=function(e){return r.a.createElement("div",{className:"py-3 bg-warning mb-3"},"Hello from Navbar")};var j=function(e){return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=document.getElementById("root");o.a.render(r.a.createElement(j,R.dataset),R),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.d1367726.chunk.js.map